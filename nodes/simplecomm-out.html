<script type="text/javascript">
function isByte(value) {
	let num = Number(value);
	return !(isNaN(num) || num < 0 || num > 255);
}
</script>

<script type="text/javascript">
	RED.nodes.registerType('simplecomm-out', {
		category: 'function',
		color: '#66bb44',
		defaults: {
			config: {
				value: '',
				required: true,
				type: 'simplecomm-config',
			},
			type: {
				value: 0,
				required: true,
				validate: isByte,
				type: "number",
			},
			destination: {
				value: 0,
				required: false,
				validate: isByte,
				type: "number",
			},
			name: { value: "" }
		},
		inputs: 1,
		outputs: 1,
		icon: "bridge.png",
		label: function() {
			return this.name || "simplecomm";
		}
	});
</script>

<script type="text/x-red" data-template-name="simplecomm-out">
  <div class="form-row">
    <label for="node-input-config">Configuration</label>
    <input type="text" id="node-input-config" placeholder="Configuration">
  </div>
  <div class="form-row">
    <label for="node-input-type">Type</label>
    <input type="text" id="node-input-type" placeholder="Type">
  </div>
  <div class="form-row">
    <label for="node-input-destination">Destination</label>
    <input type="text" id="node-input-destination" placeholder="Destination">
  </div>
  <div class="form-row">
    <label for="node-input-name"><i class="icon-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
</script>

<script type="text/x-red" data-help-name="simplecomm-out">
	<p>Send a message using the SimpleComm protocol</p>
</script>
